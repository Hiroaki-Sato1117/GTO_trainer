<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTO Poker Trainer v3</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            font-family: 'Hiragino Sans', 'Meiryo', sans-serif;
            height: 100vh;
            overflow: hidden;
        }

        /* „É°„Ç§„É≥„É¨„Ç§„Ç¢„Ç¶„Éà - 3„Ç´„É©„É† */
        .game-container {
            display: grid;
            grid-template-rows: 50px 1fr;
            height: 100vh;
            width: 100%;
        }

        /* „Éò„ÉÉ„ÉÄ„Éº */
        .header {
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .header-center {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle-btn {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }
        .toggle-btn.active {
            background: #3b82f6;
            color: white;
        }
        .toggle-btn.inactive {
            background: #374151;
            color: #9ca3af;
        }
        .toggle-btn:hover {
            filter: brightness(1.1);
        }

        /* 3„Ç´„É©„É†ÊßãÈÄ† */
        .content-area {
            display: grid;
            overflow: hidden;
            transition: grid-template-columns 0.3s ease;
        }

        .content-3col {
            grid-template-columns: 250px 1fr 300px;
        }
        .content-2col-left {
            grid-template-columns: 250px 1fr;
        }
        .content-2col-right {
            grid-template-columns: 1fr 300px;
        }
        .content-1col {
            grid-template-columns: 1fr;
        }

        /* Â∑¶„Éë„Éç„É´ - „É¨„É≥„Ç∏Ë°® */
        .left-panel {
            background: rgba(0,0,0,0.4);
            border-right: 1px solid rgba(255,255,255,0.1);
            padding: 16px;
            overflow-y: auto;
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .panel-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            color: white;
        }

        .close-btn {
            background: none;
            border: none;
            color: #9ca3af;
            cursor: pointer;
            font-size: 18px;
            padding: 4px 8px;
        }
        .close-btn:hover { color: white; }

        /* Âè≥„Éë„Éç„É´ - GTOÊé®Â•® */
        .right-panel {
            background: linear-gradient(180deg, rgba(88,28,135,0.9), rgba(59,7,100,0.9));
            border-left: 1px solid rgba(168,85,247,0.3);
            padding: 16px;
            overflow-y: auto;
        }

        /* „É°„Ç§„É≥„Ç®„É™„Ç¢ */
        .main-area {
            display: grid;
            grid-template-rows: 1fr 100px 80px;
            overflow: visible;
        }

        /* „ÉÜ„Éº„Éñ„É´„Ç®„É™„Ç¢ */
        .table-area {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px 20px 50px 20px;
            overflow: visible;
        }

        .poker-table {
            position: relative;
            width: 650px;
            height: 320px;
        }

        .table-felt {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 550px;
            height: 240px;
            background: radial-gradient(ellipse, #1e6b3a 0%, #145028 60%, #0d3d1c 100%);
            border-radius: 120px;
            border: 10px solid #5c3d2e;
            box-shadow: 0 0 0 3px #8b6914, 0 0 30px rgba(0,0,0,0.5), inset 0 0 50px rgba(0,0,0,0.3);
        }

        /* „Éó„É¨„Ç§„É§„ÉºÈÖçÁΩÆ - Áõ∏ÂØæ‰ΩçÁΩÆÔºàËá™ÂàÜ„ÇíÂü∫Ê∫ñ„Å´Âè≥Âõû„ÇäÔºâ */
        .player-seat {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 5;
            transition: all 0.3s ease;
        }

        /* Áõ∏ÂØæ‰ΩçÁΩÆ1: Â∑¶‰∏ã (Ëá™ÂàÜ„ÅÆÂ∑¶Èö£) */
        .seat-rel-1 { bottom: 15px; left: -35px; }
        /* Áõ∏ÂØæ‰ΩçÁΩÆ2: Â∑¶‰∏ä */
        .seat-rel-2 { top: 15px; left: -35px; }
        /* Áõ∏ÂØæ‰ΩçÁΩÆ3: ‰∏äÔºàÊ≠£Èù¢Ôºâ */
        .seat-rel-3 { top: -55px; left: 50%; transform: translateX(-50%); }
        /* Áõ∏ÂØæ‰ΩçÁΩÆ4: Âè≥‰∏ä */
        .seat-rel-4 { top: 15px; right: -35px; }
        /* Áõ∏ÂØæ‰ΩçÁΩÆ5: Âè≥‰∏ã (Ëá™ÂàÜ„ÅÆÂè≥Èö£) */
        .seat-rel-5 { bottom: 15px; right: -35px; }

        .player-seat.active .player-box {
            box-shadow: 0 0 15px #fbbf24, 0 0 30px rgba(251,191,36,0.4);
            border-color: #fbbf24;
        }
        .player-seat.folded { opacity: 0.35; }

        .player-box {
            background: linear-gradient(to bottom, #2a2a3a, #1a1a2a);
            border: 2px solid #444;
            border-radius: 8px;
            padding: 6px 10px;
            min-width: 90px;
            text-align: center;
        }

        .player-cards {
            display: flex;
            gap: 2px;
            margin-bottom: 4px;
        }

        /* „Ç¢„ÇØ„Ç∑„Éß„É≥„É©„Éô„É´ */
        .action-label {
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            color: white;
            white-space: nowrap;
            animation: fadeIn 0.3s ease;
        }
        .action-label.fold { background: #6b7280; }
        .action-label.raise { background: #f59e0b; }
        .action-label.call { background: #22c55e; }
        .action-label.check { background: #3b82f6; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(-8px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        /* „Ç´„Éº„Éâ */
        .card {
            border-radius: 3px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.4);
        }
        .card-xs { width: 24px; height: 32px; font-size: 8px; }
        .card-sm { width: 32px; height: 44px; font-size: 10px; }
        .card-md { width: 44px; height: 60px; font-size: 14px; }
        .card-lg { width: 60px; height: 84px; font-size: 18px; }

        .card-back {
            background: linear-gradient(135deg, #8b0000, #4a0000);
            border: 2px solid #ffd700;
        }
        .card-front {
            background: linear-gradient(to bottom, #fff, #f0f0f0);
            border: 2px solid #333;
        }
        .red { color: #dc2626; }
        .black { color: #1a1a1a; }

        /* „Éù„Ç∏„Ç∑„Éß„É≥„Éê„ÉÉ„Ç∏ */
        .pos-badge {
            font-size: 9px;
            font-weight: bold;
            padding: 2px 5px;
            border-radius: 3px;
            color: white;
            display: inline-block;
        }
        .pos-BTN { background: #f97316; }
        .pos-SB { background: #3b82f6; }
        .pos-BB { background: #22c55e; }
        .pos-UTG { background: #ef4444; }
        .pos-HJ { background: #eab308; }
        .pos-CO { background: #a855f7; }

        /* „Ç≥„Éü„É•„Éã„ÉÜ„Ç£„Ç®„É™„Ç¢ */
        .community-area {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .community-cards {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin-bottom: 6px;
        }

        /* Ëá™ÂàÜ„ÅÆ„Ç®„É™„Ç¢ */
        .hero-area {
            background: linear-gradient(to bottom, rgba(30,58,95,0.9), rgba(13,31,60,0.9));
            border-top: 2px solid #3b82f6;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 24px;
            padding: 8px 12px;
            position: relative;
            z-index: 10;
        }

        .hero-cards {
            display: flex;
            gap: 6px;
        }

        .hero-info {
            text-align: center;
        }

        /* „Ç¢„ÇØ„Ç∑„Éß„É≥„Ç®„É™„Ç¢ */
        .action-area {
            background: linear-gradient(to bottom, #1f2937, #111827);
            border-top: 1px solid #374151;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
        }

        .action-row {
            display: flex;
            gap: 8px;
            align-items: center;
            justify-content: center;
        }

        .action-btn {
            padding: 8px 20px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 13px;
            color: white;
            cursor: pointer;
            border: none;
            transition: all 0.15s;
        }
        .action-btn:hover { transform: scale(1.03); filter: brightness(1.1); }
        .action-btn:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }
        .btn-fold { background: linear-gradient(to bottom, #6b7280, #4b5563); }
        .btn-check { background: linear-gradient(to bottom, #6b7280, #4b5563); }
        .btn-call { background: linear-gradient(to bottom, #22c55e, #16a34a); }
        .btn-raise { background: linear-gradient(to bottom, #f59e0b, #d97706); }

        .size-btn {
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 11px;
            font-weight: bold;
            color: white;
            background: #374151;
            border: none;
            cursor: pointer;
        }
        .size-btn:hover { background: #4b5563; }
        .size-btn.allin { background: #dc2626; }

        .bet-slider {
            width: 160px;
            height: 5px;
            border-radius: 3px;
            background: linear-gradient(to right, #22c55e, #f59e0b, #ef4444);
            -webkit-appearance: none;
            cursor: pointer;
        }
        .bet-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            border: 2px solid #3b82f6;
            cursor: pointer;
        }

        .bet-input {
            width: 70px;
            padding: 5px 8px;
            border-radius: 5px;
            background: #1f2937;
            border: 1px solid #374151;
            color: white;
            font-size: 13px;
            text-align: center;
        }

        /* „É¨„É≥„Ç∏Ë°® */
        .range-info {
            background: rgba(0,0,0,0.3);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 12px;
        }

        .range-title {
            font-size: 12px;
            font-weight: bold;
            color: #a5b4fc;
            margin-bottom: 8px;
        }

        .range-grid {
            display: grid;
            grid-template-columns: repeat(13, 1fr);
            gap: 1px;
        }

        .range-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 7px;
            font-weight: bold;
            border-radius: 2px;
            cursor: pointer;
            transition: all 0.15s;
        }
        .range-cell:hover {
            transform: scale(1.4);
            z-index: 10;
        }
        .range-cell.raise { background: #f59e0b; color: white; }
        .range-cell.call { background: #22c55e; color: white; }
        .range-cell.fold { background: #374151; color: #6b7280; }
        .range-cell.current {
            box-shadow: 0 0 0 2px #fff, 0 0 6px #fff;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 2px #fff, 0 0 6px #fff; }
            50% { box-shadow: 0 0 0 3px #fbbf24, 0 0 10px #fbbf24; }
        }

        .range-legend {
            display: flex;
            gap: 12px;
            margin-top: 10px;
            font-size: 10px;
            color: #9ca3af;
        }
        .range-legend-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .range-legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .current-hand-info {
            margin-top: 12px;
            padding: 10px;
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.5);
            border-radius: 6px;
            text-align: center;
        }

        /* GTOÊé®Â•® */
        .progress-bar {
            height: 26px;
            border-radius: 5px;
            overflow: hidden;
            display: flex;
            background: #374151;
            margin-bottom: 14px;
        }
        .progress-bar > div {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            color: white;
        }

        .gto-section {
            margin-bottom: 14px;
        }

        .gto-section-title {
            font-size: 11px;
            font-weight: bold;
            color: #c4b5fd;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .gto-item {
            font-size: 11px;
            color: #e0e0e0;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex;
            align-items: flex-start;
            gap: 5px;
        }
        .gto-item:last-child { border-bottom: none; }

        .gto-bullet {
            color: #a855f7;
            flex-shrink: 0;
        }

        /* „Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ„É¢„Éº„ÉÄ„É´ - GPU„Ç¢„ÇØ„Çª„É©„É¨„Éº„Ç∑„Éß„É≥ÂØæÂøú */
        .feedback-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.25s ease, visibility 0.25s ease, background 0.25s ease;
            will-change: opacity, visibility;
        }

        .feedback-overlay.show {
            opacity: 1;
            visibility: visible;
            background: rgba(0,0,0,0.7);
        }

        .feedback-modal {
            background: linear-gradient(135deg, #1f2937, #111827);
            border-radius: 16px;
            padding: 30px 40px;
            text-align: center;
            min-width: 400px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            transform: scale(0.85) translateZ(0);
            opacity: 0;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.25s ease;
            will-change: transform, opacity;
            backface-visibility: hidden;
        }

        .feedback-overlay.show .feedback-modal {
            transform: scale(1) translateZ(0);
            opacity: 1;
        }

        .feedback-icon {
            font-size: 60px;
            margin-bottom: 16px;
        }

        .feedback-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 16px;
        }
        .feedback-title.correct { color: #22c55e; }
        .feedback-title.error { color: #ef4444; }
        .feedback-title.acceptable { color: #f59e0b; }

        .feedback-details {
            color: #9ca3af;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .feedback-message {
            color: white;
            font-size: 15px;
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .feedback-btn {
            padding: 12px 32px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 14px;
            color: white;
            background: #3b82f6;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }
        .feedback-btn:hover {
            background: #2563eb;
            transform: scale(1.05);
        }

        /* Âá¶ÁêÜ‰∏≠„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº */
        .processing-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px;
            background: rgba(251, 191, 36, 0.2);
            border: 1px solid rgba(251, 191, 36, 0.5);
            border-radius: 8px;
            color: #fbbf24;
            font-size: 13px;
        }

        .spinner {
            width: 18px;
            height: 18px;
            border: 2px solid rgba(251,191,36,0.3);
            border-top-color: #fbbf24;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .waiting-message {
            text-align: center;
            padding: 16px;
            color: #9ca3af;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo, useRef } = React;

        const API_BASE = 'http://localhost:3001/api';
        const SUIT_SYMBOLS = { hearts: '‚ô•', diamonds: '‚ô¶', clubs: '‚ô£', spades: '‚ô†' };
        const RANK_NAMES = { 2:'2', 3:'3', 4:'4', 5:'5', 6:'6', 7:'7', 8:'8', 9:'9', 10:'T', 11:'J', 12:'Q', 13:'K', 14:'A' };
        const RANGE_LABELS = ['A', 'K', 'Q', 'J', 'T', '9', '8', '7', '6', '5', '4', '3', '2'];

        // „Éù„Ç∏„Ç∑„Éß„É≥Âà•„Ç™„Éº„Éó„É≥„É¨„É≥„Ç∏
        const OPEN_RANGES = {
            UTG: [
                [1,1,1,1,1,0,0,0,0,0,0,0,0],
                [1,1,1,1,1,0,0,0,0,0,0,0,0],
                [1,1,1,1,1,0,0,0,0,0,0,0,0],
                [1,0,0,1,1,0,0,0,0,0,0,0,0],
                [1,0,0,0,1,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,1,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,1,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,1,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0]
            ],
            CO: [
                [1,1,1,1,1,1,1,0,0,0,0,0,0],
                [1,1,1,1,1,1,0,0,0,0,0,0,0],
                [1,1,1,1,1,1,0,0,0,0,0,0,0],
                [1,1,1,1,1,1,0,0,0,0,0,0,0],
                [1,1,1,1,1,1,0,0,0,0,0,0,0],
                [1,0,0,0,0,1,1,0,0,0,0,0,0],
                [0,0,0,0,0,0,1,1,0,0,0,0,0],
                [0,0,0,0,0,0,0,1,1,0,0,0,0],
                [0,0,0,0,0,0,0,0,1,1,0,0,0],
                [0,0,0,0,0,0,0,0,0,1,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,1,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,1,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,1]
            ],
            BTN: [
                [1,1,1,1,1,1,1,1,0,0,0,0,0],
                [1,1,1,1,1,1,1,0,0,0,0,0,0],
                [1,1,1,1,1,1,1,0,0,0,0,0,0],
                [1,1,1,1,1,1,1,0,0,0,0,0,0],
                [1,1,1,1,1,1,1,0,0,0,0,0,0],
                [1,1,1,1,1,1,1,1,0,0,0,0,0],
                [1,0,0,0,0,1,1,1,1,0,0,0,0],
                [1,0,0,0,0,1,1,1,1,0,0,0,0],
                [0,0,0,0,0,0,0,1,1,1,0,0,0],
                [0,0,0,0,0,0,0,0,1,1,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,1,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,1,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,1]
            ]
        };

        // 3bet„É¨„É≥„Ç∏Ôºàvs „Ç™„Éº„Éó„É≥Ôºâ
        const THREE_BET_RANGES = {
            'vs_UTG': [
                [2,2,2,2,0,0,0,0,0,0,0,0,0],
                [2,2,2,0,0,0,0,0,0,0,0,0,0],
                [2,0,2,1,0,0,0,0,0,0,0,0,0],
                [0,0,0,2,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,1,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,1,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,1,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,1,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0]
            ]
        };

        // „Ç´„Éº„Éâ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
        function Card({ card, faceDown, size = 'sm' }) {
            const sizeClass = {xs:'card-xs', sm:'card-sm', md:'card-md', lg:'card-lg'}[size] || 'card-sm';
            if (faceDown || !card) return <div className={`card card-back ${sizeClass}`} />;
            const isRed = card.suit === 'hearts' || card.suit === 'diamonds';
            return (
                <div className={`card card-front ${sizeClass}`}>
                    <span className={isRed ? 'red' : 'black'}>{RANK_NAMES[card.rank]}</span>
                    <span className={isRed ? 'red' : 'black'}>{SUIT_SYMBOLS[card.suit]}</span>
                </div>
            );
        }

        // „Éè„É≥„ÉâË°®Ë®ò„ÇíÂèñÂæó
        function getHandNotation(cards) {
            if (!cards || cards.length !== 2) return null;
            const sorted = [...cards].sort((a, b) => b.rank - a.rank);
            const r1 = RANK_NAMES[sorted[0].rank];
            const r2 = RANK_NAMES[sorted[1].rank];
            const suited = sorted[0].suit === sorted[1].suit ? 's' : 'o';
            if (sorted[0].rank === sorted[1].rank) return r1 + r2;
            return r1 + r2 + suited;
        }

        // „Éó„É¨„Ç§„É§„Éº„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
        function PlayerSeat({ player, isActive, seatClass }) {
            const actionClass = player.lastAction ? player.lastAction.toLowerCase() : '';
            return (
                <div className={`player-seat ${seatClass} ${isActive ? 'active' : ''} ${player.isFolded ? 'folded' : ''}`}>
                    {player.lastAction && !player.isFolded && (
                        <div className={`action-label ${actionClass}`}>
                            {player.lastAction === 'raise' ? `Raise ${player.lastActionAmount}` :
                             player.lastAction === 'call' ? `Call ${player.lastActionAmount}` :
                             player.lastAction === 'fold' ? 'Fold' :
                             player.lastAction === 'check' ? 'Check' :
                             player.lastAction}
                        </div>
                    )}
                    <div className="player-cards">
                        <Card faceDown={true} size="xs" />
                        <Card faceDown={true} size="xs" />
                    </div>
                    <div className="player-box">
                        <div style={{marginBottom: '3px'}}>
                            <span className={`pos-badge pos-${player.position}`}>{player.position}</span>
                        </div>
                        <div className="text-white text-xs">{player.name}</div>
                        <div className="text-yellow-400 text-xs font-bold">{player.stack.toLocaleString()}</div>
                        {player.currentBet > 0 && <div className="text-green-400" style={{fontSize: '10px'}}>Bet: {player.currentBet}</div>}
                        {player.isFolded && <div className="text-red-400" style={{fontSize: '10px'}}>FOLD</div>}
                    </div>
                </div>
            );
        }

        // „É¨„É≥„Ç∏„Éë„Éç„É´
        function RangePanel({ heroPosition, heroHand, firstRaiser, onClose }) {
            const handNotation = heroHand ? getHandNotation(heroHand) : null;

            // Áä∂Ê≥Å„Å´Âøú„Åò„Åü„É¨„É≥„Ç∏„ÇíÈÅ∏Êäû
            const getRangeData = () => {
                if (firstRaiser) {
                    return {
                        title: `${heroPosition} vs ${firstRaiser} „Ç™„Éº„Éó„É≥`,
                        subtitle: '3bet / „Ç≥„Éº„É´„É¨„É≥„Ç∏',
                        range: THREE_BET_RANGES['vs_UTG'] || OPEN_RANGES.UTG,
                        legend: [
                            { label: '3bet', color: '#f59e0b' },
                            { label: '„Ç≥„Éº„É´', color: '#22c55e' },
                            { label: '„Éï„Ç©„Éº„É´„Éâ', color: '#374151' }
                        ]
                    };
                }
                return {
                    title: `${heroPosition} „Ç™„Éº„Éó„É≥„É¨„É≥„Ç∏ (RFI)`,
                    subtitle: null,
                    range: OPEN_RANGES[heroPosition] || OPEN_RANGES.UTG,
                    legend: [
                        { label: '„Ç™„Éº„Éó„É≥', color: '#22c55e' },
                        { label: '„Éï„Ç©„Éº„É´„Éâ', color: '#374151' }
                    ]
                };
            };

            const rangeData = getRangeData();

            const getCellHand = (row, col) => {
                const r1 = RANGE_LABELS[row];
                const r2 = RANGE_LABELS[col];
                if (row === col) return r1 + r2;
                if (row < col) return r1 + r2 + 's';
                return r2 + r1 + 'o';
            };

            const getCellClass = (row, col) => {
                const value = rangeData.range[row]?.[col] || 0;
                if (value === 2) return 'raise';
                if (value === 1) return 'call';
                return 'fold';
            };

            const isCurrentHand = (row, col) => {
                if (!handNotation) return false;
                return getCellHand(row, col) === handNotation;
            };

            const isInRange = () => {
                if (!handNotation) return false;
                for (let r = 0; r < 13; r++) {
                    for (let c = 0; c < 13; c++) {
                        if (getCellHand(r, c) === handNotation && rangeData.range[r]?.[c] > 0) {
                            return true;
                        }
                    }
                }
                return false;
            };

            return (
                <div className="left-panel">
                    <div className="panel-header">
                        <div className="panel-title">
                            <span>üìä</span>
                            <span>„É¨„É≥„Ç∏Ë°®</span>
                        </div>
                        <button className="close-btn" onClick={onClose}>‚àí</button>
                    </div>

                    <div className="range-info">
                        <div className="range-title">{rangeData.title}</div>
                        {rangeData.subtitle && (
                            <div style={{fontSize: '10px', color: '#9ca3af', marginBottom: '8px'}}>
                                {rangeData.subtitle}
                            </div>
                        )}

                        <div className="range-grid">
                            {RANGE_LABELS.map((_, row) =>
                                RANGE_LABELS.map((_, col) => {
                                    const cellHand = getCellHand(row, col);
                                    const isCurrent = isCurrentHand(row, col);
                                    return (
                                        <div
                                            key={`${row}-${col}`}
                                            className={`range-cell ${getCellClass(row, col)} ${isCurrent ? 'current' : ''}`}
                                            title={cellHand}
                                        >
                                            {cellHand.substring(0, 2)}
                                        </div>
                                    );
                                })
                            )}
                        </div>

                        <div className="range-legend">
                            {rangeData.legend.map((item, i) => (
                                <div key={i} className="range-legend-item">
                                    <div className="range-legend-color" style={{background: item.color}} />
                                    <span>{item.label}</span>
                                </div>
                            ))}
                        </div>
                    </div>

                    {handNotation && (
                        <div className="current-hand-info">
                            <div className="text-white font-bold text-sm mb-1">
                                ÁèæÂú®„ÅÆ„Éè„É≥„Éâ: {handNotation}
                            </div>
                            <div className={isInRange() ? 'text-green-400' : 'text-red-400'} style={{fontSize: '12px'}}>
                                {isInRange() ? '‚úì „É¨„É≥„Ç∏ÂÜÖ' : '‚úó „É¨„É≥„Ç∏Â§ñ'}
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // GTOÊé®Â•®„Éë„Éç„É´
        function GTOPanel({ recommendation, onClose }) {
            if (!recommendation) {
                return (
                    <div className="right-panel">
                        <div className="panel-header">
                            <div className="panel-title">
                                <span>üéØ</span>
                                <span>GTOÊé®Â•®</span>
                            </div>
                            <button className="close-btn" onClick={onClose}>‚àí</button>
                        </div>
                        <div style={{color: '#9ca3af', textAlign: 'center', padding: '30px 0'}}>
                            „ÅÇ„Å™„Åü„ÅÆ„Çø„Éº„É≥„Å´„Å™„Çã„Å®<br/>GTOÊé®Â•®„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô
                        </div>
                    </div>
                );
            }

            const {
                fold_percentage = 0,
                call_percentage = 0,
                raise_percentage = 0,
                situation_analysis = [],
                reasoning = [],
                raise_size_description,
                raise_reasoning,
                hand_notation
            } = recommendation;

            return (
                <div className="right-panel">
                    <div className="panel-header">
                        <div className="panel-title">
                            <span>üéØ</span>
                            <span>GTOÊé®Â•®</span>
                        </div>
                        <button className="close-btn" onClick={onClose}>‚àí</button>
                    </div>

                    {hand_notation && (
                        <div style={{textAlign: 'center', marginBottom: '12px'}}>
                            <span className="text-yellow-400 font-bold text-lg">{hand_notation}</span>
                        </div>
                    )}

                    <div className="progress-bar">
                        {fold_percentage > 0 && (
                            <div style={{width: `${fold_percentage}%`, background: '#6b7280'}}>
                                Fold {fold_percentage}%
                            </div>
                        )}
                        {call_percentage > 0 && (
                            <div style={{width: `${call_percentage}%`, background: '#22c55e'}}>
                                Call {call_percentage}%
                            </div>
                        )}
                        {raise_percentage > 0 && (
                            <div style={{width: `${raise_percentage}%`, background: '#f59e0b'}}>
                                Raise {raise_percentage}%
                            </div>
                        )}
                    </div>

                    {situation_analysis.length > 0 && (
                        <div className="gto-section">
                            <div className="gto-section-title">
                                <span>üìä</span> Áä∂Ê≥ÅÂàÜÊûê
                            </div>
                            {situation_analysis.map((item, i) => (
                                <div key={i} className="gto-item">
                                    <span className="gto-bullet">‚Ä¢</span>
                                    <span>{item}</span>
                                </div>
                            ))}
                        </div>
                    )}

                    {reasoning.length > 0 && (
                        <div className="gto-section">
                            <div className="gto-section-title">
                                <span>üìù</span> Êé®Â•®ÁêÜÁî±
                            </div>
                            {reasoning.map((item, i) => (
                                <div key={i} className="gto-item">
                                    <span className="gto-bullet">‚Ä¢</span>
                                    <span>{item}</span>
                                </div>
                            ))}
                        </div>
                    )}

                    {raise_percentage > 0 && raise_size_description && (
                        <div className="gto-section">
                            <div className="gto-section-title">
                                <span>üí∞</span> „É¨„Ç§„Ç∫„Çµ„Ç§„Ç∫
                            </div>
                            <div className="text-yellow-300 text-sm font-bold mb-1">
                                {raise_size_description}
                            </div>
                            {raise_reasoning && (
                                <div className="text-gray-300" style={{fontSize: '11px'}}>
                                    {raise_reasoning}
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }

        // „Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ„É¢„Éº„ÉÄ„É´ - CSS„Éà„É©„É≥„Ç∏„Ç∑„Éß„É≥ÂØæÂøú
        function FeedbackModal({ feedback, onNextHand }) {
            const { result, userAction, gtoRecommendation, message } = feedback || {};

            const resultConfig = {
                CORRECT: { icon: '‚úÖ', title: 'CORRECT', class: 'correct' },
                ERROR: { icon: '‚ùå', title: 'ERROR', class: 'error' },
                ACCEPTABLE: { icon: '‚ö†Ô∏è', title: 'ACCEPTABLE', class: 'acceptable' }
            };

            const config = resultConfig[result] || resultConfig.ERROR;
            const isOpen = !!feedback;

            return (
                <div className={`feedback-overlay ${isOpen ? 'show' : ''}`} onClick={onNextHand}>
                    <div className="feedback-modal" onClick={e => e.stopPropagation()}>
                        <div className="feedback-icon">{config.icon}</div>
                        <div className={`feedback-title ${config.class}`}>{config.title}</div>
                        <div className="feedback-details">
                            „ÅÇ„Å™„Åü„ÅÆÈÅ∏Êäû: {userAction || '-'}
                        </div>
                        <div className="feedback-details">
                            GTOÊé®Â•®: Fold {gtoRecommendation?.fold_percentage || 0}% /
                            Call {gtoRecommendation?.call_percentage || 0}% /
                            Raise {gtoRecommendation?.raise_percentage || 0}%
                        </div>
                        <div className="feedback-message">{message || ''}</div>
                        <button className="feedback-btn" onClick={onNextHand}>
                            Ê¨°„ÅÆ„Éè„É≥„Éâ„Å∏
                        </button>
                    </div>
                </div>
            );
        }

        // „É°„Ç§„É≥„Ç¢„Éó„É™
        function App() {
            const [game, setGame] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [isProcessingAI, setIsProcessingAI] = useState(false);
            const [gtoRecommendation, setGtoRecommendation] = useState(null);
            const [betAmount, setBetAmount] = useState(300);
            const [showRangePanel, setShowRangePanel] = useState(true);
            const [showGTOPanel, setShowGTOPanel] = useState(true);
            const [feedback, setFeedback] = useState(null);

            // „Ç∞„É™„ÉÉ„Éâ„Ç´„É©„É†„ÇíÂãïÁöÑ„Å´Ë®àÁÆó
            const contentClass = useMemo(() => {
                if (showRangePanel && showGTOPanel) return 'content-area content-3col';
                if (showRangePanel) return 'content-area content-2col-left';
                if (showGTOPanel) return 'content-area content-2col-right';
                return 'content-area content-1col';
            }, [showRangePanel, showGTOPanel]);

            // AI„Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÈ†ÜÊ¨°Âá¶ÁêÜ
            const processAIActions = async () => {
                setIsProcessingAI(true);
                while (true) {
                    await new Promise(resolve => setTimeout(resolve, 400));
                    try {
                        const res = await fetch(`${API_BASE}/game/next-ai-action`);
                        const data = await res.json();
                        if (!data.action) break;
                        setGame(data.action.game);
                        if (!data.hasMore) break;
                    } catch (err) {
                        console.error('AI action error:', err);
                        break;
                    }
                }
                setIsProcessingAI(false);
                try {
                    const gtoRes = await fetch(`${API_BASE}/game/gto-recommendation`);
                    const gtoData = await gtoRes.json();
                    setGtoRecommendation(gtoData.recommendation);
                } catch (err) {
                    console.error('GTO fetch error:', err);
                }
            };

            const startNewGame = useCallback(async () => {
                setIsLoading(true);
                setGtoRecommendation(null);
                setFeedback(null);
                try {
                    const res = await fetch(`${API_BASE}/game/new`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' }
                    });
                    const data = await res.json();
                    setGame(data.game);
                    setBetAmount(data.game.blinds.bb * 3);
                    setIsLoading(false);
                    if (data.pendingActionsCount > 0) {
                        await processAIActions();
                    } else {
                        const gtoRes = await fetch(`${API_BASE}/game/gto-recommendation`);
                        const gtoData = await gtoRes.json();
                        setGtoRecommendation(gtoData.recommendation);
                    }
                } catch (err) {
                    console.error(err);
                    setIsLoading(false);
                }
            }, []);

            // Ê¨°„ÅÆ„Éè„É≥„Éâ„Å∏ÔºàBTN„É≠„Éº„ÉÜ„Éº„Ç∑„Éß„É≥Ôºâ
            const nextHand = useCallback(async () => {
                setIsLoading(true);
                setGtoRecommendation(null);
                setFeedback(null);
                try {
                    const res = await fetch(`${API_BASE}/game/next-hand`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' }
                    });
                    const data = await res.json();
                    setGame(data.game);
                    setBetAmount(data.game.blinds.bb * 3);
                    setIsLoading(false);
                    if (data.pendingActionsCount > 0) {
                        await processAIActions();
                    } else {
                        const gtoRes = await fetch(`${API_BASE}/game/gto-recommendation`);
                        const gtoData = await gtoRes.json();
                        setGtoRecommendation(gtoData.recommendation);
                    }
                } catch (err) {
                    console.error(err);
                    setIsLoading(false);
                }
            }, []);

            // „Ç¢„ÇØ„Ç∑„Éß„É≥Ë©ï‰æ°
            const evaluateAction = (action, recommendation) => {
                if (!recommendation) return null;
                const { fold_percentage, call_percentage, raise_percentage } = recommendation;
                const recs = [
                    { action: 'fold', percentage: fold_percentage },
                    { action: 'call', percentage: call_percentage },
                    { action: 'check', percentage: call_percentage },
                    { action: 'raise', percentage: raise_percentage }
                ].sort((a, b) => b.percentage - a.percentage);

                const primary = recs[0];
                const secondary = recs[1];
                const userActionType = action === 'check' ? 'call' : action;

                if (userActionType === primary.action ||
                    (userActionType === 'call' && primary.action === 'check')) {
                    return {
                        result: 'CORRECT',
                        message: `Á¥†Êô¥„Çâ„Åó„ÅÑÔºÅGTOÊé®Â•®„ÅÆ${primary.action}„ÇíÈÅ∏Êäû„Åó„Åæ„Åó„Åü„ÄÇ`
                    };
                }
                if (secondary && secondary.percentage >= 20 &&
                    (userActionType === secondary.action ||
                     (userActionType === 'call' && secondary.action === 'check'))) {
                    return {
                        result: 'ACCEPTABLE',
                        message: `Ë®±ÂÆπÁØÑÂõ≤ÂÜÖ„Åß„Åô„ÄÇ${secondary.action}„ÅØÊ∑∑ÂêàÊà¶Áï•„ÅÆ‰∏ÄÈÉ®„Å®„Åó„Å¶${secondary.percentage}%„ÅÆÈ†ªÂ∫¶„ÅßÊé®Â•®„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ`
                    };
                }
                return {
                    result: 'ERROR',
                    message: `GTOÁöÑ„Å´„ÅØ${primary.action}„Åå${primary.percentage}%„ÅßÊé®Â•®„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇÈÅ∏Êäû„Åó„Åü„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅØEV„ÇíÊêç„Å™„ÅÜÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ`
                };
            };

            const performAction = async (action, amount) => {
                // „Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ„ÇíË°®Á§∫
                if (gtoRecommendation) {
                    const evaluation = evaluateAction(action, gtoRecommendation);
                    if (evaluation) {
                        setFeedback({
                            ...evaluation,
                            userAction: action === 'raise' ? `Raise ${amount}` : action.charAt(0).toUpperCase() + action.slice(1),
                            gtoRecommendation
                        });
                    }
                }

                setIsLoading(true);
                setGtoRecommendation(null);

                try {
                    const res = await fetch(`${API_BASE}/game/action`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ action, amount })
                    });
                    const data = await res.json();
                    setGame(data.game);
                    setIsLoading(false);

                    if (!data.handComplete && data.pendingActionsCount > 0) {
                        await processAIActions();
                    } else if (!data.handComplete) {
                        const gtoRes = await fetch(`${API_BASE}/game/gto-recommendation`);
                        const gtoData = await gtoRes.json();
                        setGtoRecommendation(gtoData.recommendation);
                    }
                } catch (err) {
                    console.error(err);
                    setIsLoading(false);
                }
            };

            useEffect(() => { startNewGame(); }, [startNewGame]);

            const hero = game?.players?.find(p => p.isHero);
            const otherPlayers = game?.players?.filter(p => !p.isHero) || [];
            const currentPlayer = game?.players?.[game?.currentPlayerIndex];
            const isHeroTurn = currentPlayer?.isHero && !currentPlayer?.isFolded && !isProcessingAI;
            const toCall = game ? Math.max(0, (game.currentBet || 0) - (hero?.currentBet || 0)) : 0;
            const minRaise = game ? Math.max((game.currentBet || 0) * 2, (game.blinds?.bb || 100) * 2) : 200;
            const pot = game?.pot || 0;

            // Áõ∏ÂØæ‰ΩçÁΩÆ„ÇíË®àÁÆóÔºàËá™ÂàÜ„ÅÆÂ∏≠„ÇíÂü∫Ê∫ñ„Å´Âè≥Âõû„Çä„ÅßÈÖçÁΩÆÔºâ
            const getRelativeSeatClass = (playerSeatIndex) => {
                if (!game) return 'seat-rel-3';
                const heroSeatIndex = game.heroSeatIndex;
                // Ëá™ÂàÜ„Åã„Çâ„ÅÆÁõ∏ÂØæ‰ΩçÁΩÆ„ÇíË®àÁÆóÔºà1„Äú5„ÄÅ0„ÅØËá™ÂàÜ„Å™„ÅÆ„Åß„Çπ„Ç≠„ÉÉ„ÉóÔºâ
                const relativeIndex = (playerSeatIndex - heroSeatIndex + 6) % 6;
                return `seat-rel-${relativeIndex}`;
            };

            return (
                <div className="game-container">
                    {/* „Éò„ÉÉ„ÉÄ„Éº */}
                    <header className="header">
                        <div className="header-left">
                            <span className="text-xl">üÉè</span>
                            <h1 className="text-white font-bold">GTO Poker Trainer</h1>
                            <span className="text-yellow-400 text-sm font-bold">
                                Hand #{game?.handNumber || 1}
                            </span>
                            <span className="text-gray-400 text-sm">
                                SB/BB: {game?.blinds?.sb || 50}/{game?.blinds?.bb || 100}
                            </span>
                        </div>
                        <div className="header-center">
                            <button
                                className={`toggle-btn ${showRangePanel ? 'active' : 'inactive'}`}
                                onClick={() => setShowRangePanel(!showRangePanel)}
                            >
                                üìä „É¨„É≥„Ç∏
                            </button>
                            <button
                                className={`toggle-btn ${showGTOPanel ? 'active' : 'inactive'}`}
                                onClick={() => setShowGTOPanel(!showGTOPanel)}
                            >
                                üéØ GTO
                            </button>
                            <button
                                onClick={startNewGame}
                                className="bg-blue-600 text-white px-4 py-1.5 rounded text-sm font-medium hover:bg-blue-700 ml-2"
                                disabled={isLoading || isProcessingAI}
                            >
                                Êñ∞„Åó„ÅÑ„Éè„É≥„Éâ
                            </button>
                        </div>
                    </header>

                    {/* „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Ç®„É™„Ç¢ */}
                    <div className={contentClass}>
                        {/* Â∑¶„Éë„Éç„É´ - „É¨„É≥„Ç∏Ë°® */}
                        {showRangePanel && (
                            <RangePanel
                                heroPosition={hero?.position || 'UTG'}
                                heroHand={hero?.holeCards}
                                firstRaiser={game?.firstRaiserPosition}
                                onClose={() => setShowRangePanel(false)}
                            />
                        )}

                        {/* „É°„Ç§„É≥„Ç®„É™„Ç¢ */}
                        <div className="main-area">
                            {/* „ÉÜ„Éº„Éñ„É´ */}
                            <div className="table-area">
                                {game && (
                                    <div className="poker-table">
                                        <div className="table-felt">
                                            <div className="community-area">
                                                <div className="text-white text-sm mb-2">
                                                    Pot: <span className="text-yellow-400 font-bold">{pot.toLocaleString()}</span>
                                                </div>
                                                <div className="community-cards">
                                                    {[0,1,2,3,4].map(i => (
                                                        game.communityCards[i] ? (
                                                            <Card key={i} card={game.communityCards[i]} size="sm" />
                                                        ) : (
                                                            <div key={i} className="card card-sm" style={{border: '2px dashed rgba(255,255,255,0.2)', background: 'transparent'}} />
                                                        )
                                                    ))}
                                                </div>
                                                <div className="text-gray-300" style={{fontSize: '10px'}}>{game.currentStreet?.toUpperCase()}</div>
                                            </div>
                                        </div>
                                        {otherPlayers.map((player) => (
                                            <PlayerSeat
                                                key={player.id}
                                                player={player}
                                                isActive={game.players.indexOf(player) === game.currentPlayerIndex}
                                                seatClass={getRelativeSeatClass(player.seatIndex)}
                                            />
                                        ))}
                                    </div>
                                )}
                            </div>

                            {/* „Éí„Éº„É≠„Éº„Ç®„É™„Ç¢ */}
                            <div className="hero-area">
                                {hero && (
                                    <>
                                        <div className="hero-cards">
                                            <Card card={hero.holeCards?.[0]} size="lg" />
                                            <Card card={hero.holeCards?.[1]} size="lg" />
                                        </div>
                                        <div className="hero-info">
                                            <div style={{marginBottom: '4px'}}>
                                                <span className={`pos-badge pos-${hero.position}`}>{hero.position}</span>
                                                <span className="text-white text-sm font-bold ml-2">„ÅÇ„Å™„Åü</span>
                                            </div>
                                            <div className="text-yellow-400 font-bold">{hero.stack.toLocaleString()}</div>
                                            {hero.currentBet > 0 && (
                                                <div className="text-green-400 text-sm">Bet: {hero.currentBet}</div>
                                            )}
                                        </div>
                                    </>
                                )}
                            </div>

                            {/* „Ç¢„ÇØ„Ç∑„Éß„É≥„Ç®„É™„Ç¢ */}
                            <div className="action-area">
                                {isProcessingAI ? (
                                    <div className="processing-indicator">
                                        <div className="spinner" />
                                        <span>{currentPlayer?.name || 'AI'} „Åå„Ç¢„ÇØ„Ç∑„Éß„É≥‰∏≠...</span>
                                    </div>
                                ) : isHeroTurn ? (
                                    <>
                                        <div className="action-row">
                                            <button className="action-btn btn-fold" onClick={() => performAction('fold')} disabled={isLoading}>
                                                „Éï„Ç©„Éº„É´„Éâ
                                            </button>
                                            <button
                                                className={`action-btn ${toCall === 0 ? 'btn-check' : 'btn-call'}`}
                                                onClick={() => performAction(toCall === 0 ? 'check' : 'call')}
                                                disabled={isLoading}
                                            >
                                                {toCall === 0 ? '„ÉÅ„Çß„ÉÉ„ÇØ' : `„Ç≥„Éº„É´ ${toCall}`}
                                            </button>
                                            <button className="action-btn btn-raise" onClick={() => performAction('raise', betAmount)} disabled={isLoading}>
                                                „É¨„Ç§„Ç∫ {betAmount}
                                            </button>
                                        </div>
                                        <div className="action-row">
                                            <button className="size-btn" onClick={() => setBetAmount(Math.floor(pot / 3))}>1/3</button>
                                            <button className="size-btn" onClick={() => setBetAmount(Math.floor(pot * 2 / 3))}>2/3</button>
                                            <button className="size-btn" onClick={() => setBetAmount(pot)}>Pot</button>
                                            <button className="size-btn allin" onClick={() => setBetAmount(hero?.stack || 0)}>All-in</button>
                                            <input
                                                type="range"
                                                className="bet-slider"
                                                min={minRaise}
                                                max={hero?.stack || 10000}
                                                value={betAmount}
                                                onChange={(e) => setBetAmount(Number(e.target.value))}
                                            />
                                            <input
                                                type="number"
                                                className="bet-input"
                                                value={betAmount}
                                                onChange={(e) => setBetAmount(Number(e.target.value))}
                                            />
                                        </div>
                                    </>
                                ) : (
                                    <div className="waiting-message">
                                        {game?.isHandComplete ? (
                                            <div>
                                                <span className="text-yellow-400 font-bold text-lg">„Éè„É≥„ÉâÁµÇ‰∫ÜÔºÅ</span>
                                                <button
                                                    onClick={nextHand}
                                                    className="ml-4 bg-blue-600 text-white px-4 py-2 rounded font-medium hover:bg-blue-700"
                                                >
                                                    Ê¨°„ÅÆ„Éè„É≥„Éâ„Å∏
                                                </button>
                                            </div>
                                        ) : (
                                            <span>{currentPlayer?.name || 'AI'} „ÅÆ„Çø„Éº„É≥...</span>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Âè≥„Éë„Éç„É´ - GTOÊé®Â•® */}
                        {showGTOPanel && (
                            <GTOPanel
                                recommendation={isHeroTurn ? gtoRecommendation : null}
                                onClose={() => setShowGTOPanel(false)}
                            />
                        )}
                    </div>

                    {/* „Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ„É¢„Éº„ÉÄ„É´ */}
                    <FeedbackModal
                        feedback={feedback}
                        onNextHand={nextHand}
                    />
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
